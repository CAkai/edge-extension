const s="ask-icloud-side-panel",c="translate-icloud-side-panel";chrome.runtime.onInstalled.addListener(()=>{chrome.contextMenus.create({id:s,title:`${chrome.i18n.getMessage("ask")} ${chrome.i18n.getMessage("extensionName")}`,contexts:["all"]}),chrome.contextMenus.create({id:c,title:chrome.i18n.getMessage("translateICloudAI").replace("{{extensionName}}",chrome.i18n.getMessage("extensionName")),contexts:["all"]})});chrome.sidePanel.setPanelBehavior({openPanelOnActionClick:!0}).catch(o=>console.error(o));function t(o,e){chrome.sidePanel.open({windowId:o}).then(()=>{const n=async a=>{a.isInChat?e():setTimeout(()=>{chrome.storage.local.get("isInChat",n)},200)};chrome.storage.local.get("isInChat",n)}).catch(n=>console.error(n))}chrome.contextMenus.onClicked.addListener((o,e)=>{switch(o.menuItemId){case s:t((e==null?void 0:e.windowId)??1,()=>{chrome.runtime.sendMessage({type:"clipboard",value:o.selectionText},n=>console.log(n))});break;case c:t((e==null?void 0:e.windowId)??1,()=>{chrome.runtime.sendMessage({type:"clipboard",value:chrome.i18n.getMessage("translateContent").replace("{{content}}",o.selectionText??"")},n=>console.log(n))});break}});
